{{ form_start(form, {'attr': {'enctype': 'multipart/form-data'}}) }}
<div class="d-flex flex-column gap-5">

    <div class="form-group row">
        <div class="col-md-3  fv-row">
            {{ form_label(form.groupeTaxe) }}
            {{ form_widget(form.groupeTaxe) }}
        </div>
        <div class="col-md-2  fv-row">
            {{ form_label(form.modeDefPrix) }}
            {{ form_widget(form.modeDefPrix) }}
            {% set session = app.session.get('societe') %}
            <input type="hidden" id="regime" value="{{ (session) ? session['estRegimeTPS'] : null }}">
        </div>
        <div class="col-md-2 fv-row box d-flex flex-column justify-content-center align-items-start mt-6 d-none">
            <label class="form-check form-check-sm form-check-custom form-check-solid float-start">
                {{ form_widget(form.estTaxable) }}
                <span class="form-check-label">
                    {{ form.estTaxable.vars.label }}
                </span>
            </label>
        </div>
        <div class="col-md-2 fv-row box d-flex flex-column justify-content-center align-items-start mt-6">
            <label class="form-check form-check-sm form-check-custom form-check-solid float-start">
                {{ form_widget(form.estService) }}
                <span class="form-check-label">
                    {{ form.estService.vars.label }}
                </span>
            </label>
        </div>
        {# <!--<div class="col-md-3 fv-row box d-flex flex-column justify-content-center align-items-start mt-6">
            <label class="form-check form-check-sm form-check-custom form-check-solid float-start">
                {{ form_widget(form.estModeCarreau) }}
                <span class="form-check-label">
                    {{ form.estModeCarreau.vars.label }}
                </span>
            </label>
        </div>--> #}
    </div>
    <div class="form-group row ">
        <div class="col-md-4  fv-row">
            {{ form_label(form.famille) }}
            {{ form_widget(form.famille) }}
        </div>
        <div class="col-md-4  fv-row">
            {{ form_label(form.nomProd) }}
            {{ form_widget(form.nomProd) }}
        </div>
        <div class="col-md-4  fv-row">
            {{ form_label(form.refProd) }}
            {{ form_widget(form.refProd) }}
        </div>
    </div>
    <div id="ignoreInEstService" class="form-group row">
        <div class="col-md-3  fv-row">
            {{ form_label(form.magasinDefaut) }}
            {{ form_widget(form.magasinDefaut) }}
        </div>
        <div class="col-md-3  fv-row">
            {{ form_label(form.suiviStock) }}
            {{ form_widget(form.suiviStock) }}
        </div>
        <div class="col-md-3  fv-row">
            {{ form_label(form.prixVenteProd) }}
            {{ form_widget(form.prixVenteProd) }}
        </div>
        <div class="col-md-3  fv-row">
            {{ form_label(form.seuilAppro) }}
            {{ form_widget(form.seuilAppro) }}
        </div>
    </div>
    <div id="infoCarreau" class="form-group  row p-3 pb-6 d-none bg-light-primary">
        
        <div class="col  fv-row">
            {{ form_label(form.pieceParCarton) }}
            {{ form_widget(form.pieceParCarton) }}
        </div>
        <div class="col  fv-row">
            {{ form_label(form.pieceParMetreCarre) }}
            {{ form_widget(form.pieceParMetreCarre) }}
        </div>
        <div class="col  fv-row">
            {{ form_label(form.metreCarreParCarton) }}
            {{ form_widget(form.metreCarreParCarton) }}
        </div>
        <div class="col  fv-row">
            {{ form_label(form.surfaceParPiece) }}
            {{ form_widget(form.surfaceParPiece) }}
        </div>
        <div class="col  fv-row">
            {{ form_label(form.couleurCarreau) }}
            {{ form_widget(form.couleurCarreau) }}
        </div>
    </div>
     <div class="form-group  fv-row">
        {{ form_label(form.descProd) }}
        {{ form_widget(form.descProd) }}
    </div>
    <div class="py-5">
        <div class="rounded border p-2">
            <ul class="nav nav-tabs nav-line-tabs nav-line-tabs-2x border-transparent fs-4 fw-semibold mb-5" role="tablist">
                

                <!--begin:::Tab item-->
                <li class="nav-item" role="presentation">
                    <a class="nav-link pb-2 active" data-bs-toggle="tab" href="#kt_ecommerce_settings_store" aria-selected="false" role="tab" tabindex="-1">
                        Mode de conditionnement
                    </a>
                </li>
                <!--end:::Tab item-->
                <!--begin:::Tab item-->
                <li class="nav-item" role="presentation">
                    <a class="nav-link text-active-primary pb-2" data-bs-toggle="tab" href="#kt_ecommerce_settings_general" aria-selected="true" role="tab">
                        Associ√© des images
                    </a>
                </li>
                <!--end:::Tab item-->
            </ul>

            <div class="tab-content" id="myTabContent">
                <!--begin:::Tab pane-->
                <div class="tab-pane fade clearfix" id="kt_ecommerce_settings_general" role="tabpanel">
                    {# <div class="form-group mb-2">
                        <a href="javascript:;" class="btn btn-light-success add_item_link"
                           data-collection-holder-class="collection-form-med">
                            <i class="la la-plus"></i>Ajouter une image
                        </a>
                    </div> #}
                    {% set prefix = 'collection-form-med___' ~ form.medias.vars.name ~ '__' %}
                    <div class="row collection-form-med" data-collection-prefix="{{ prefix }}"
                         data-collection-key = "__{{ form.medias.vars.name }}__"
                         data-index="{{ form.medias|length > 0 ? form.medias|last.vars.name + 1 : 0 }}"
                         data-prototype="{% autoescape 'html' %}{{ include('media/partials/_media.prototype.html.twig',
                             { 'form': form.medias.vars.prototype, 'class':'media' })|escape }}{% endautoescape %}">
                        {% for key,m in form.medias %}
                            <div class="ligne form-child" data-index="{{ key }}" id="{{ 'collection-form-med_' ~ key }}">
                                {{ include('media/partials/_media.prototype.html.twig',
                                    { 'form': m, 'class':'media' }) }}
                            </div>
                        {% endfor %}
                    </div>
                    <div class="form-group mt-2 float-start">
                        <a href="javascript:;" class="btn btn-light-success add_item_link"
                           data-collection-holder-class="collection-form-med">
                            <i class="la la-plus"></i>Ajouter une image
                        </a>
                    </div>
                </div>
                <!--end:::Tab pane-->

                <!--begin:::Tab pane-->
                <div class="tab-pane fade active show clearfix" id="kt_ecommerce_settings_store" role="tabpanel">
                    
                    {% set prefix = 'collection-form___' ~ form.produitConditionnements.vars.name ~ '__' %}
                    <div class="row collection-form" data-collection-prefix="{{ prefix }}"
                         data-collection-key = "__{{ form.produitConditionnements.vars.name }}__"
                         data-index="{{ form.produitConditionnements|length > 0 ? form.produitConditionnements|last.vars.name + 1 : 0 }}"
                         data-prototype="{% autoescape 'html' %}{{ include('produit/partials/_cond.prototype.html.twig',
                             { 'form': form.produitConditionnements.vars.prototype, 'class':'produitConditionnement' })|escape }}{% endautoescape %}">
                        {# {{ dump(form.produitConditionnements) }} #}
                        {% for key,m in form.produitConditionnements %}
                            <div class="ligne form-child {% if m.vars.data.estSup == 1  %} d-none {% endif %}" data-index="{{ key }}" id="{{ 'collection-form_' ~ key }}">
                                {{ include('produit/partials/_cond.prototype.html.twig',
                                    { 'form': m, 'class':"produitConditionnement" }) }}
                            </div>
                        {% endfor %}
                    </div>
                    <div class="form-group mt-2 float-start">
                        <a href="javascript:;" class="btn btn-light-success add_item_link"
                           data-collection-holder-class="collection-form">
                            <i class="la la-plus"></i>Ajouter un conditionnement
                        </a>
                    </div>
                </div>
                <!--end:::Tab pane-->

            </div>
        </div>
    </div>

    <div class="separator mb-6"></div>
    <div class="d-flex justify-content-end">
        <!--begin::Button-->
        <button type="reset" data-kt-cond-type="cancel" class="btn btn-light me-3">Vider</button>
        <!--end::Button-->
        <!--begin::Button-->
        <button type="submit" id="condi_submit" data-kt-cond-type="submit" class="btn btn-warning">
            <span class="indicator-label">Enregistrer</span>
            <span class="indicator-progress">Veuillez patienter svp...
            <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
        </span>
        </button>
        <!--end::Button-->
    </div>
</div>
{{ form_end(form) }}