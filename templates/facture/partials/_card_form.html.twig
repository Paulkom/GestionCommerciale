{{ form_start(form) }}
<div class="card shadow-sm">
    <div class="card-header pt-7">
        <div class="row">
            <div class="mb-5 fv-row fv-plugins-icon-container col-sm-3 col-lg-3">
                {{ form_label(form.dateFac) }}
                {{ form_widget(form.dateFac) }}
                <div class="fv-plugins-message-container invalid-feedback"></div>
            </div>
            <div class="mb-5 fv-row fv-plugins-icon-container col-sm-3 col-lg-3">
                {{ form_label(form.commandeCli) }}
                {{ form_widget(form.commandeCli) }}
                <div class="fv-plugins-message-container invalid-feedback"></div>
            </div>
            <div class="mb-5 fv-row fv-plugins-icon-container col-sm-3 col-lg-3">
                {{ form_label(form.montantTotal) }}
                {{ form_widget(form.montantTotal) }}
                <div class="fv-plugins-message-container invalid-feedback "></div>
            </div>
            <div class="mb-5 fv-row fv-plugins-icon-container col-sm-3 col-lg-3">
                {{ form_label(form.montantTotalCmd) }}
                {{ form_widget(form.montantTotalCmd) }}
                <div class="fv-plugins-message-container invalid-feedback"></div>
            </div>
        </div>
    </div>
    <div> 
        <div class="col-lg-12 col-sm-12">
            <div class="bg-light-primary h-100 px-10 py-2" id="kt_docs_swapper_parent_2">
                <div class="row"> 
                    <div class="col-sm-9 col-lg-9 pt-2">
                        <div class="fw-bolder">Ajouter les produits à facturer avec la quantité</div>
                    </div>
                    <div class="col-sm-3 col-lg-3">
                        <div class="d-flex justify-content-end">
                            <button href="javascript:;" disabled class="btn btn-sm btn-primary add_facture_item_link" data-collection-holder-class="collection-form">
                                <i class="la la-plus"></i>Ajouter un produit
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card-body">
        {% set prefix = 'collection-form___' ~ form.prodCondFacts.vars.name ~ '__' %}
        <div class="collection-form"
            data-collection-key = "__{{ form.prodCondFacts.vars.name }}__"
            data-collection-prefix="{{ prefix }}"
            data-index="{{ form.prodCondFacts|length > 0 ? form.prodCondFacts|last.vars.name + 1 : 0 }}"
            data-prototype="{% autoescape 'html' %}{{ include('facture/partials/_prod_cond_fact.prototype.html.twig',
            { 'form': form.prodCondFacts.vars.prototype, 'class':'factureMagasin' })|escape }}{% endautoescape %}">
            {% if form.prodCondFacts | length > 0 %}
                {% for key, p in form.prodCondFacts %}
                    {% if key > 0 %}
                        {% set length = form.prodCondFacts|length %}
                        {{ include('facture/partials/_prod_cond_fact.prototype.html.twig',
                            { 'form': p, 'length':length }) }}
                    {% else %}
                        {{ include('facture/partials/_prod_cond_fact.prototype.html.twig',
                            { 'form': p }) }}
                    {% endif %}
                {% endfor %}
            {% else %}
                {{ form_row(form.prodCondFacts) }}
            {% endif %}  
        </div>
        <div class="form-group mt-3">
            <button type="button" disabled class="btn btn-sm btn-light-primary add_facture_item_link" data-collection-holder-class="collection-form">
                <i class="la la-plus"></i>Ajouter un produit
            </button>
        </div>
    </div>
    <div class="modal-footer">
        <div class="d-flex justify-content-end">
            <!--begin::Button-->
            <button type="reset" data-kt-cond-type="cancel" class="btn btn-light me-3">Vider</button>
            <button readonly="readonly" type="submit" id="com_submit" data-kt-cond-type="submit" class="btn btn-warning">
                <span class="indicator-label"> <i class="fa fa-plus"></i> Enregistrer</span>
                <span class="indicator-progress">Veuillez patienter svp...
                    <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                </span>
            </button>
            <!--end::Button-->
        </div>
    </div>
</div>
{{ form_end(form) }}
        
