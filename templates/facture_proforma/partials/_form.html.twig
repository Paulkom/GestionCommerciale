{% block stylesheets %}
    <style>
        {# .row >* {
            flex-shrink: 0;
            width: 100%;
            max-width: 100%;
            padding-right: calc(var(--bs-gutter-x) * .5); 
            padding-left: calc(var(--bs-gutter-x) * .5);
            margin-top: var(--bs-gutter-y);
        } #}
    </style>
{% endblock %}

{{ form_start(form) }}
<div class="card shadow-sm">
    <div class="card-header pt-7">
        <div class="row g-2">
            <div class="mb-3 fv-row fv-plugins-icon-container col">
                {{ form_label(form.dateFactpro) }}
                {{ form_widget(form.dateFactpro) }}
                <div class="fv-plugins-message-container invalid-feedback"></div>
            </div>
            <div class="mb-3 fv-row fv-plugins-icon-container col-sm">
                {{ form_label(form.montantHt) }}
                {{ form_widget(form.montantHt) }}
                <div class="fv-plugins-message-container invalid-feedback"></div>
            </div>
             <div class="mb-3 fv-row fv-plugins-icon-container col-sm">
                {{ form_label(form.montantHtToAprRse) }}
                {{ form_widget(form.montantHtToAprRse) }}
                <div class="fv-plugins-message-container invalid-feedback"></div>
            </div>
            <div class="mb-3 fv-row fv-plugins-icon-container col-sm">
                {{ form_label(form.montantTtc) }}
                {{ form_widget(form.montantTtc) }}
                <div class="fv-plugins-message-container invalid-feedback"></div>
            </div>
            <div class="mb-3 fv-row fv-plugins-icon-container col-sm">
                {{ form_label(form.montantTotal) }}
                {{ form_widget(form.montantTotal) }}
                <div class="fv-plugins-message-container invalid-feedback"></div>
            </div>
            <div class="mb-3 fv-row fv-plugins-icon-container col-sm-3">
                {{ form_label(form.acheteur) }}
                {{ form_widget(form.acheteur) }}
                <div class="fv-plugins-message-container invalid-feedback"></div>
            </div>
        </div>
         <div class="row g-2">
            <div class="mb-3 fv-row fv-plugins-icon-container col-sm-4">
                {{ form_label(form.typeRemise) }}
                {{ form_widget(form.typeRemise) }}
                <div class="fv-plugins-message-container invalid-feedback"></div>
            </div>
            <div class="mb-3 fv-row fv-plugins-icon-container col-sm-4">
                {{ form_label(form.valeurRemise) }}
                {{ form_widget(form.valeurRemise) }}
                <div class="fv-plugins-message-container invalid-feedback"></div>
            </div>
            <div class="mb-3 fv-row fv-plugins-icon-container col-sm-4">
                {{ form_label(form.remise) }}
                {{ form_widget(form.remise) }}
                <div class="fv-plugins-message-container invalid-feedback"></div>
            </div>
        </div>
    </div>
    <div> 
        <div class="col-lg-12 col-sm-12">
            <div class="bg-light-primary h-100 px-10 pt-2" id="kt_docs_swapper_parent_2">
                <div class="row"> 
                    <div class="col-sm-9 col-lg-9 pt-2">
                        <div class="fw-bolder">Ajouter les produits demandés par le client avec la quantité</div>
                    </div>
                    <div class="col-sm-3 col-lg-3">
                        <div class="d-flex justify-content-end">
                            <a href="javascript:;" class="btn btn-sm btn-primary add_vente_item_link" data-collection-holder-class="collection-form">
                                <i class="la la-plus"></i>Ajouter un produit
                            </a>
                        </div>
                    </div>
                </div>
                <div class="separator my-2"></div>
                <div class="row g-2">
                    <div class="mb-1 col-sm-3">
                        <label class="form-label required" for="">Produit</label>
                    </div>
                    <div class="mb-1 col-sm">
                        <label class="form-label required" for="">Prix</label>
                    </div>
                    <div class="mb-1 col-sm-1">
                        <label class="form-label required" for="">Quantité</label>
                    </div>
                    <div class="mb-1 col-sm-1">
                        <label class="form-label" for="">Type Rse.</label>
                    </div>
                    <div class="mb-1 col-sm-1">
                        <label class="form-label" for="">Valeur Rse.</label>
                    </div>
                    <div class="mb-1 col-sm-1">
                        <label class="form-label" for="">MT. Rse.</label>
                    </div>
                    <div class="mb-1 col-sm">
                        <label class="form-label required" for="">Montant HT</label>
                    </div>
                    <div class="mb-1 col-sm">
                        <label class="form-label required" for="">MT HT Ap Rse</label>
                    </div>
                    <div class="mb-1 col-sm-1">
                        <label class="form-label" for="">Actions</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="px-10 py-2">
        <div class="collection-form" data-index="{{ form.produitCondFactures|length > 0 ? form.produitCondFactures|last.vars.name + 1 : 0 }}"
            data-prototype="{% autoescape 'html' %}{{ include('facture_proforma/partials/_prod_cond_facture.prototype.html.twig',
            { 'form': form.produitCondFactures.vars.prototype, 'class':'FactureProforma' })|escape }}{% endautoescape %}">
            {% if form.produitCondFactures | length > 0 %}
                {% for key, p in form.produitCondFactures %}
                    {% if key > 0 %}
                        {% set length = form.produitCondFactures|length %}
                        {{ include('facture_proforma/partials/_prod_cond_facture.prototype.html.twig',
                            { 'form': p, 'length':length }) }}
                    {% else %}
                        {{ include('facture_proforma/partials/_prod_cond_facture.prototype.html.twig',
                            { 'form': p }) }}
                    {% endif %}
                {% endfor %}
            {% else %}
                {{ form_row(form.produitCondFactures) }}
            {% endif %}  
        </div>
        <div class="form-group">
            <a href="javascript:;" class="btn btn-sm btn-light-primary add_vente_item_link" data-collection-holder-class="collection-form">
                <i class="la la-plus"></i>Ajouter un produit
            </a>
        </div>
    </div>
    <div class="modal-footer">
        <div class="d-flex justify-content-end">
            <!--begin::Button-->
            <button type="reset" data-kt-cond-type="cancel" class="btn btn-light me-3">Vider</button>
            <!--end::Button-->
            <!--begin::Button-->
            <button type="submit" id="com_submit" data-kt-cond-type="submit" class="btn btn-warning">
                <span class="indicator-label"> <i class="fa fa-plus"></i> Enregistrer</span>
                <span class="indicator-progress">Veuillez patienter svp...
                    <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                </span>
            </button>
            <!--end::Button-->
        </div>
    </div>
</div>
<div class="modal fade" tabindex="-1" id="kt_modal_scrollable_2">
    <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Ajouter un nouveau client</h5>

                <!--begin::Close-->
                <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                    <span class="svg-icon svg-icon-2x"></span>
                </div>
                <!--end::Close-->
            </div>

            <div class="modal-body">
                <div class="row">
                    <div data-kt-buttons="true">
                        {% for child in form.statut.children %}
                            <label for="{{ child.vars.id }}" class="btn btn-outline btn-outline-dashed flex-stack text-start py-2 px-4">
                                <div class="d-flex align-items-center me-2">
                                    <div class="form-check form-check-custom form-check-solid form-check-primary me-2">
                                        {{ form_widget(child, {'attr': {'class': 'form-check-input'} }) }}
                                    </div>
                                    <div class="flex-grow-1">
                                        <h5 class="d-flex align-items-center fs-3 pt-2 fw-bolder flex-wrap">
                                            {{ child.vars.label }}
                                        </h5>
                                    </div>
                                </div>
                            </label>
                        {% endfor %}
                    </div>
                </div><br>

                <div class="row">
                    <div class="mb-3 fv-row fv-plugins-icon-container col">
                        {{ form_label(form.nom) }}
                        {{ form_widget(form.nom) }}
                        <div class="fv-plugins-message-container invalid-feedback"></div>
                    </div>
                    <div class="mb-3 fv-row fv-plugins-icon-container col">
                        {{ form_label(form.prenom) }}
                        {{ form_widget(form.prenom) }}
                    </div>
                </div>
                <div class="mb-3 fv-row fv-plugins-icon-container">
                    {{ form_label(form.denomination) }}
                    {{ form_widget(form.denomination) }}
                    <div class="fv-plugins-message-container invalid-feedback"></div>
                </div>
                <div class="mb-3 fv-row fv-plugins-icon-container">
                    {{ form_label(form.raisonSociale) }}
                    {{ form_widget(form.raisonSociale) }}
                    <div class="fv-plugins-message-container invalid-feedback"></div>
                </div>
                <div class="row">
                    <div class="mb-3 fv-row fv-plugins-icon-container col">
                        {{ form_label(form.sigle) }}
                        {{ form_widget(form.sigle) }}
                        <div class="fv-plugins-message-container invalid-feedback"></div>
                    </div> 
                    <div class="mb-3 fv-row fv-plugins-icon-container col">
                        {{ form_label(form.ifu) }}
                        {{ form_widget(form.ifu) }}
                        <div class="fv-plugins-message-container invalid-feedback"></div>
                    </div>
                </div>
                <div class="mb-3 fv-row fv-plugins-icon-container">
                    {{ form_label(form.rccm) }}
                    {{ form_widget(form.rccm) }}
                    <div class="fv-plugins-message-container invalid-feedback"></div>
                </div>
                <div class="row">
                    <div class="mb-3 fv-row fv-plugins-icon-container col">
                        {{ form_label(form.telephone1) }}
                        {{ form_widget(form.telephone1) }}
                        <div class="fv-plugins-message-container invalid-feedback"></div>
                    </div> 
                    <div class="mb-3 fv-row fv-plugins-icon-container col">
                        {{ form_label(form.telephone2) }}
                        {{ form_widget(form.telephone2) }}
                        <div class="fv-plugins-message-container invalid-feedback"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="mb-3 fv-row fv-plugins-icon-container col">
                        {{ form_label(form.adresse) }}
                        {{ form_widget(form.adresse) }}
                        <div class="fv-plugins-message-container invalid-feedback"></div>
                    </div>
                    <div class="mb-3 fv-row fv-plugins-icon-container col">
                        {{ form_label(form.email) }}
                        {{ form_widget(form.email) }}
                        <div class="fv-plugins-message-container invalid-feedback"></div>
                    </div> 
                </div>
                <div class="row">
                    <div class="mb-3 fv-row fv-plugins-icon-container col">
                        {{ form_label(form.dateNais) }}
                        {{ form_widget(form.dateNais) }}
                        <div class="fv-plugins-message-container invalid-feedback"></div>
                    </div> 
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="annuler" class="btn btn-danger" data-bs-dismiss="modal">Annuler</button>
                 <button type="button" id="ajouter" class="btn btn-warning" data-bs-dismiss="modal">Ajouter le client</button>
            </div>
        </div>
    </div>
</div>
{{ form_end(form) }}
        
